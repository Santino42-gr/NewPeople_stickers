# Testing Documentation

## –û–±–∑–æ—Ä —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

### üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (–∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)

#### `test-apis.js`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–Ω–µ—à–Ω–∏—Ö API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- **–ó–∞–ø—É—Å–∫**: `npm run test:apis` –∏–ª–∏ `node test-apis.js`
- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**:
  - Telegram Bot API –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
  - Piapi AI API –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
  - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### `test-deployment.js` 
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–ø–ª–æ—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–ó–∞–ø—É—Å–∫**: `npm run test:deployment` –∏–ª–∏ `node test-deployment.js`
- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**:
  - –ó–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–≤–∏—Å–∞
  - –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### `test-error-handling.js`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- **–ó–∞–ø—É—Å–∫**: `npm run test:error-handling` –∏–ª–∏ `node test-error-handling.js`
- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**:
  - –û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ API
  - Fail-safe –º–µ—Ö–∞–Ω–∏–∑–º—ã
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

#### `test-security.js`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **–ó–∞–ø—É—Å–∫**: `npm run test:security` –∏–ª–∏ `node test-security.js`
- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**:
  - –í–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - Rate limiting
  - –ó–∞—â–∏—Ç—É –æ—Ç –∞—Ç–∞–∫

#### `test-faceswap.js`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–∞ face-swap
- **–ó–∞–ø—É—Å–∫**: `node test-faceswap.js`
- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**:
  - –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Piapi AI
  - –ö–∞—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### üß™ –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (–ø–∞–ø–∫–∞ tests/)

#### `tests/telegramController-test.js`
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ Telegram webhook
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∫–æ–º–∞–Ω–¥

#### `tests/stickerService-test.js`
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç–∏–∫–µ—Ä-–ø–∞–∫–æ–≤
- Telegram Sticker API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

#### `tests/imageService-test.js`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

#### `tests/piapiService-test.js`
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Piapi AI API
- Face-swap –æ–ø–µ—Ä–∞—Ü–∏–∏

#### `tests/userLimitsService-test.js`
- –°–∏—Å—Ç–µ–º–∞ –ª–∏–º–∏—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–∏

#### `tests/stickerGeneration-test.js`
- –ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ç–∏–∫–µ—Ä–æ–≤
- End-to-end —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –í—Å–µ —Ç–µ—Å—Ç—ã
```bash
npm test
```

### –ì—Ä—É–ø–ø—ã —Ç–µ—Å—Ç–æ–≤
```bash
# API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
npm run test:apis

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
npm run test:security

# –î–µ–ø–ª–æ–π–º–µ–Ω—Ç
npm run test:deployment

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
npm run test:error-handling
```

### –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
```bash
# –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
node tests/telegramController-test.js
node tests/stickerService-test.js
node tests/userLimitsService-test.js

# –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
node test-faceswap.js
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```env
TELEGRAM_BOT_TOKEN=your_bot_token
PIAPI_API_KEY=your_piapi_key
SUPABASE_URL=your_supabase_url
SUPABASE_ANON_KEY=your_supabase_key
```

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- Node.js 18+
- –í—Å–µ npm –ø–∞–∫–µ—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- –î–æ—Å—Ç—É–ø –∫ –≤–Ω–µ—à–Ω–∏–º API

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–π —Ç–µ—Å—Ç
- –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
- API –¥–æ—Å—Ç—É–ø–Ω—ã
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

### ‚ùå –ù–µ—É–¥–∞—á–Ω—ã–π —Ç–µ—Å—Ç
- –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## CI/CD Integration

–¢–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä–∏ –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–µ —á–µ—Ä–µ–∑ Railway:
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
3. –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
4. –î–µ–ø–ª–æ–π–º–µ–Ω—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —É—Å–ø–µ—à–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
1. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `test-[–Ω–∞–∑–≤–∞–Ω–∏–µ].js` –≤ –∫–æ—Ä–Ω–µ
2. –î–æ–±–∞–≤–∏—Ç—å –≤ `package.json` scripts
3. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ

### –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
1. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ `tests/`
2. –°–ª–µ–¥–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—É `[—Å–µ—Ä–≤–∏—Å]-test.js`
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- **API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–ª—é—á–∏ –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
- **Timeout –æ—à–∏–±–∫–∏**: –£–≤–µ–ª–∏—á–∏—Ç—å —Ç–∞–π–º–∞—É—Ç—ã –≤ —Ç–µ—Å—Ç–∞—Ö
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .env —Ñ–∞–π–ª

### –û—Ç–ª–∞–¥–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
npm run validate-env

# –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏
DEBUG=* node test-apis.js
```
